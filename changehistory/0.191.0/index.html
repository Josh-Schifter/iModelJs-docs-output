<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <script>
      var redirect = "https://www.imodeljs.org" + location.pathname.substring(location.pathname.indexOf('/', 1)) + location.search + location.hash;
      window.location = redirect;
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>0.191.0 Change Notes - iModel.js</title>
    <meta name="BeMetalsmithVersion" content="v3.3.10-7">
    <meta name="og:title" content="0.191.0 Change Notes - iModel.js">
    <meta name="twitter:title" content="0.191.0 Change Notes - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">  
        <link rel='shortcut icon' type='image/x-icon' href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/imodeljs_favicon_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/ class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/bis">BIS</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/reference">API Reference</a></li><li class="nav-item change-history-tab active"><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/changehistory">v1.10.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>

<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h2 id="change history">Change History</h2>
    <hr>
    <h3 id="roadmap">Roadmap</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/roadmap" class="table-of-contents-link">Big Picture</a></li>
    </ul>
    <hr>
    <h3 id="versions">Versions</h3>
    <ul>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.10.0" class="table-of-contents-link">1.10.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.9.0" class="table-of-contents-link">1.9.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.8.0" class="table-of-contents-link">1.8.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.7.0" class="table-of-contents-link">1.7.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.6.0" class="table-of-contents-link">1.6.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.5.0" class="table-of-contents-link">1.5.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.4.0" class="table-of-contents-link">1.4.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.3.0" class="table-of-contents-link">1.3.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.2.0" class="table-of-contents-link">1.2.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.1.0" class="table-of-contents-link">1.1.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/1.0.0" class="table-of-contents-link">1.0.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/0.191.0" class="table-of-contents-link">0.191.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/0.189.0" class="table-of-contents-link">0.189.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/0.187.0" class="table-of-contents-link">0.187.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/0.171.0" class="table-of-contents-link">0.171.0</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/0.163.0" class="table-of-contents-link">0.163.0</a></p>
    </li>
    </ul>
    <hr>
    <h3 id="change logs"><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./changehistory/changelogs" class="table-of-contents-link">Change Logs</a></h3>
    <ul>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/changelog" class="table-of-contents-link">imodeljs-backend</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/changelog" class="table-of-contents-link">imodeljs-frontend</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-common/changelog" class="table-of-contents-link">imodeljs-common</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/geometry-core/changelog" class="table-of-contents-link">geometry-core</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/changelog" class="table-of-contents-link">imodeljs-clients</a></p>
    </li>
    <li><p><a href="http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/bentleyjs-core/changelog" class="table-of-contents-link">bentleyjs-core</a></p>
    </li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/changehistory/">Change History</a> > 0.191.0</div>
            <div class="edit-link"><a href="https://bentleycs.visualstudio.com/iModelTechnologies/iModelTechnologies/_git/imodeljs?path=/docs/changehistory%2F0.191.0.md" target="_blank">Edit this page</a></div>
            <h1 id="0.191.0 change notes">0.191.0 Change Notes</h1>
<h2 class="h-changes-to-imodelappstartup">Changes to <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#startup'>IModelApp.startup</a><a id="changes-to-imodelappstartup" class="heading-anchor" href="#changes-to-imodelappstartup"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>In previous versions of the <code>@bentley/imodeljs-frontend</code> package, the recommendation was to create a subclass of <code>IModelApp</code> to customize frontend behavior.</p>
<p>This proved problematic, since all of the members of <code>IModelApp</code> are static, and <code>IModelApp</code> itself is intended to be a singleton. This works at cross-purposes with JavaScript subclassing with static members, since each subclass creates a separate object (you can either have subclassing or a singleton, not both.)</p>
<p>To resolve this issue, it is now <strong>illegal</strong> to subclass from IModelApp, and instead all options for customization are supplied by the new <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelappoptions'>IModelAppOptions</a> argument to <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#startup'>IModelApp.startup</a>.</p>
<p>In addition, the static methods:</p>
<ul>
<li><code>onStartup</code></li>
<li><code>supplyRenderSystem</code></li>
<li><code>supplyI18NOptions</code></li>
</ul>
<p>on <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp'>IModelApp</a> have been removed, since their only purpose was to allow customization via subclasses. The latter two are replaced by members of the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelappoptions'>IModelAppOptions</a> argument.</p>
<p>The <code>onStartup</code> method was previously called on the subclass inside <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#startup'>IModelApp.startup</a>. A typical pattern was:</p>
<pre class="no-line-numbers"><code class="language-typescript">  class MyApp extends IModelApp {
    public static appData: MyAppData;
    protected static onStartup() {
      IModelApp.applicationId = &quot;2322&quot;; // Note: &quot;this.applicationId&quot; would not have worked previously
      this.myAppData = new MyAppData();
      . . . other startup code
    }
  }</code></pre>
<p>This can now be replaced with code like:</p>
<pre class="no-line-numbers"><code class="language-typescript">  class MyApp { // note, does not extend IModelApp
    public static appData: MyAppData;
    public static startup() {
      IModelApp.startup({ applicationId: &quot;2322&quot; });
      this.myAppData = new MyAppData();
      . . . other startup code
    }
  }</code></pre>
<p>Then the call to <code>MyApp.startup()</code> elsewhere in your code can remain unchanged. Any place where you may have accessed members of <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp'>IModelApp</a> via <code>MyApp</code> should be changed to instead access <code>IModelApp</code> directly. E.g.:</p>
<pre class="no-line-numbers"><code class="language-typescript">  const val = MyApp.i18n.translate(&quot;key&quot;);</code></pre>
<p>can be replaced with</p>
<pre class="no-line-numbers"><code class="language-typescript">  const val = IModelApp.i18n.translate(&quot;key&quot;);</code></pre>
<p>In summary, it is no longer necessary (or possible) to subclass from <code>IModelApp</code>. However, if your application has global information you wish to hold, you may simply create your own <code>xxxApp</code> singleton class that does not derive from <code>IModelApp</code>. This is an API breaking change, and all frontend apps will likely have some necessary change.</p>
<h2 class="h-changes-to-methods-of-entitystate">Changes to methods of <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/elementstate/entitystate'>EntityState</a><a id="changes-to-methods-of-entitystate" class="heading-anchor" href="#changes-to-methods-of-entitystate"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The method <code>EntityState.getClassFullName</code> was renamed to an accessor <code>get classFullName</code> for consistency with the same method on <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/schema/entity'>Entity</a>.</p>
<p>The method <code>EntityState.sqlName</code> was removed. It returned a string in the form &quot;SchemaName.ClassName&quot;, whereas <code>EntityState.classFullName</code> returns &quot;SchemaName:ClassName&quot; (colon vs. dot syntax.) Since <code>ECSql</code> now supports both syntaxes, it is no longer necessary to have the <code>sqlName</code> method. You may simply replace all uses of <code>sqlName</code> with <code>classFullName</code>.</p>
<h2 class="h-deprecation-of-standalone-imodels">Deprecation of <em>standalone</em> iModels<a id="deprecation-of-standalone-imodels" class="heading-anchor" href="#deprecation-of-standalone-imodels"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The confusing concept of <em>standalone</em> iModels has been removed from the frontend API and deprecated in the backend API.
All API related to <em>standalone</em> iModels will be eliminated prior to the 1.0 release.
All uses of the following <em>standalone</em> iModel functions must be migrated:</p>
<ul>
<li><code>IModelDb.openStandalone</code></li>
<li><code>IModelDb.createStandalone</code></li>
<li><code>IModelConnection.openStandalone</code></li>
</ul>
<p>Change history is essential for editing scenarios, so should use iModels managed by iModelHub. See:</p>
<ul>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodels/imodeldb/#open'>IModelDb.open</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelconnection/imodelconnection/#open'>IModelConnection.open</a></li>
</ul>
<p>Archival scenarios can use <em>snapshot</em> iModels. Once created, a <em>snapshot</em> iModel is read-only. See:</p>
<ul>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodels/imodeldb/createsnapshot'>IModelDb.createSnapshot</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodels/imodeldb/#opensnapshot'>IModelDb.openSnapshot</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelconnection/imodelconnection/#opensnapshot'>IModelConnection.openSnapshot</a></li>
</ul>
<h2 class="h-node-10153">Node 10.15.3<a id="node-10153" class="heading-anchor" href="#node-10153"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The iModel.js backend now requires <a href="https://nodejs.org" target="_blank">Node version 10.15.3</a> or later.</p>
<h2 class="h-starting-up-of-backends">Starting up of backends<a id="starting-up-of-backends" class="heading-anchor" href="#starting-up-of-backends"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>For web applications that have <em>not</em> migrated to using <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./learning/common/accesstoken'>OpenId Connect</a> for authentication, it&apos;s  important that backends are started with a configuration that increases the allowed maximum size of headers to accommodate the larger SAML based access tokens, and the additional headers that are now needed to be passed through.</p>
<p>e.g., in package.json</p>
<pre class="no-line-numbers"><code class="language-json">...
&quot;start:backend&quot;: &quot;node --max-http-header-size=16000 lib/backend/main.js&quot;,
...</code></pre>
<h2 class="h-electron-4100">Electron 4.10.0<a id="electron-4100" class="heading-anchor" href="#electron-4100"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The electron version used internally has  been updated to v4.10.0.</p>
<h2 class="h-changes-to-authorization-of-frontend-applications">Changes to authorization of frontend applications<a id="changes-to-authorization-of-frontend-applications" class="heading-anchor" href="#changes-to-authorization-of-frontend-applications"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li><code>IModelApp.accessToken</code> has now been removed.</li>
<li>Frontend applications that need to access protected data from the iModelHub must now provide an implementation of <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/iauthorizationclient'>IAuthorizationClient</a> through the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#authorizationclient'>IModelApp.authorizationClient</a> setting.</li>
<li>The following implementations of <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#authorizationclient'>IModelApp.authorizationClient</a> can be used:<ul>
<li>Frontends running in a browser: <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/oidc/oidcbrowserclient'>OidcBrowserClient</a></li>
<li>Test implementations that use <code>ImsCredentials</code> to fetch legacy SAML tokens: ImsTestAuthorizationClient</li>
</ul>
</li>
<li>Frontend methods that require authorization do not require the accessToken to be passed in anymore -<ul>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelconnection/imodelconnection/#open'>IModelConnection.open</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelconnection/imodelconnection/#close'>IModelConnection.close</a></li>
</ul>
</li>
</ul>
<h2 class="h-breaking-changes-to-rpc-interfaces">Breaking changes to RPC interfaces<a id="breaking-changes-to-rpc-interfaces" class="heading-anchor" href="#breaking-changes-to-rpc-interfaces"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li>Breaking changes have been made to <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-common/rpcinterface/imodelreadrpcinterface'>IModelReadRpcInterface</a> and IModelWriteRpcInterface. This implies the frontend and backends based on the next version of iModel.js break compatibility and have to be deployed simultaneously.</li>
<li>None of the RPC interfaces now need to pass the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/accesstoken'>AccessToken</a> as an argument. The RPC implementation provides the mechanism to to make this happen through a generic context. More on this below.</li>
<li><code>RpcOperationPolicy.requestId()</code> has now been removed</li>
</ul>
<h2 class="h-enhancements-to-authorization-and-logging">Enhancements to authorization and logging<a id="enhancements-to-authorization-and-logging" class="heading-anchor" href="#enhancements-to-authorization-and-logging"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li><p>A new family of classes starting with <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/bentleyjs-core/utils/clientrequestcontext'>ClientRequestContext</a> now provide generic context for a specific client request. The context carries the necessary information for making the API calls to generate usage metrics, logging diagnostics (telemetry), and authorizing the use of various services.</p>
</li>
<li><p>Instances of these classes are passed to almost all asynchronous calls that eventually call into the various services. For synchronous calls, a static &quot;current&quot; context avoids the need to pass the context as an argument.</p>
</li>
<li><p>The base class <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/bentleyjs-core/utils/clientrequestcontext'>ClientRequestContext</a> includes information on the <em><code>session</code></em>, <em><code>application</code></em> and <em><code>activity</code></em> for logging and usage metrics. Note that this replaces the use of <code>ActivityLoggingContext</code> in previous versions.</p>
</li>
<li><p>The sub class <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/authorizedclientrequestcontext'>AuthorizedClientRequestContext</a> includes the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/accesstoken'>AccessToken</a> that carries the information on <em><code>authorization</code></em>. Note that this replaces the use of <code>ActivityLoggingContext</code> and <code>AccessToken</code> as parameters in various method calls. For example,</p>
<pre class="no-line-numbers"><code class="language-typescript">function updateVersion(actx: ActivityLoggingContext, accessToken: AccessToken) {
  const version: Version = await iModelClient.versions.update(actx, accessToken, imodelId, version);
  ...
}</code></pre>
<p>becomes</p>
<pre class="no-line-numbers"><code class="language-typescript">function updateVersion(requestContext: AuthorizedClientRequestContext) {
  const version: Version = await iModelClient.versions.update(requestContext, imodelId, version);
  ...
}</code></pre>
</li>
<li><p>For web, desktop and mobile applications, at the frontend, the sub classes <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/utils/frontendrequestcontext'>FrontendRequestContext</a> and <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/utils/authorizedfrontendrequestcontext'>AuthorizedFrontendRequestContext</a> can be used as helpers to create these contexts with the necessary session, application and authorization information (if applicable) filled out.</p>
</li>
<li><p>Similarly, for agent applications, at the backend, the sub classes <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/utils/backendrequestcontext'>BackendRequestContext</a> and <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/utils/authorizedbackendrequestcontext'>AuthorizedBackendRequestContext</a> can be used as helpers to create these contexts with the necessary session and host information filled out.</p>
</li>
<li><p>In the case of web applications the context is serialized and passed as HTTP headers from the frontend to the backend. Note that all backends (for web frontends) must now be configured to allow the following headers to avoid CORS errors -</p>
</li>
</ul>
<pre class="no-line-numbers"><code class="language-typescript">      res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With, X-Correlation-Id, X-Session-Id, X-Application-Id, X-Application-Version, X-User-Id&quot;);</code></pre>
<ul>
<li><p>It is important for logging purposes that different frontend calls are tracked with a unique <code>activityId</code>. The system tries to ensure this by setting it up as a new Guid after every RPC request by default.</p>
</li>
<li><p>Any frontend methods that contact multiple services (and not just the backend through RPC) need to explicitly create the context at the top level, and manage the context through multiple service calls. Right before the RPC request is made, call  <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/bentleyjs-core/utils/clientrequestcontext/usecontextforrpc'>ClientRequestContext.useContextForRpc</a> or <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/authorizedclientrequestcontext/#usecontextforrpc'>AuthorizedClientRequestContext.useContextForRpc</a> to setup the use of that context (and the contained <code>activityId</code>) for the subsequent RPC request.</p>
</li>
</ul>
<h3 class="h-changes-to-authorization-for-single-page-applications">Changes to authorization for Single Page Applications<a id="changes-to-authorization-for-single-page-applications" class="heading-anchor" href="#changes-to-authorization-for-single-page-applications"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/oidc/oidcbrowserclient'>OidcBrowserClient</a> attempts to silently sign-in during initialization, when signIn() is called, or when the accesss token expires. The signIn() calls also takes a successRedirectUri parameter that can be used to control the redirection after the entire authorization process is completed.</p>
<h2 class="h-changes-required-for-usage-logging">Changes required for Usage Logging<a id="changes-required-for-usage-logging" class="heading-anchor" href="#changes-required-for-usage-logging"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li><p>Frontend applications must set the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/applicationid'>IModelApp.applicationId</a> and <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/applicationversion'>IModelApp.applicationVersion</a> fields to ensure the usage is logged. Bentley applications must set <code>applicationId</code> to the Bentley Global Product Registry Id (GPRID).</p>
</li>
<li><p>Similarly agent applications must set these fields in <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodelhost/imodelhost'>IModelHost</a>. Note that <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodelhost/imodelhost/applicationid'>IModelHost.applicationId</a> replaces <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodelhost/imodelhost'>IModelHost</a>.backendVersion for consistency.</p>
</li>
<li><p><code>applicationId</code> may eventually be removed once it becomes possible to infer it from the <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/accesstoken'>AccessToken</a>. A service to make this available is in the works.</p>
</li>
</ul>
<h2 class="h-miscellaneous-changes">Miscellaneous changes<a id="miscellaneous-changes" class="heading-anchor" href="#miscellaneous-changes"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li>The IModelJsExpressServer class has been moved to its own package (<code>@bentley/express-server</code>).<ul>
<li>This package has a dependency on express, so the first constructor argument to <code>IModelJsExpressServer</code> has been removed.</li>
</ul>
</li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelconnection/imodelconnection/#opensnapshot'>IModelConnection.openSnapshot</a> throws an exception if <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/imodelapp/imodelapp/#startup'>IModelApp.startup</a> has not been called.</li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-backend/imodels/imodeldb/#onopened'>IModelDb.onOpened</a> takes a callback with a different signature -  <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/authentication/authorizedclientrequestcontext'>AuthorizedClientRequestContext</a> is now passed as the first argument.</li>
<li>ImsActiveSecureTokenClient takes <code>ImsCredentials</code> as a single argument instead of separate email and password fields.</li>
<li>Deleted agent-test-app from the repository.</li>
<li><a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-clients/itwinserviceclients/requestglobaloptions/timeout'>RequestGlobalOptions.timeout</a> is now available to control global timeouts for requests to various Bentley services.</li>
</ul>
<h2 class="h-breaking-changes-to-imodelservicesopenimodel">Breaking changes to ImodelServices.openIModel<a id="breaking-changes-to-imodelservicesopenimodel" class="heading-anchor" href="#breaking-changes-to-imodelservicesopenimodel"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ul>
<li>The first argument to openIModel is now a context (project) id. It replaces passing in a ProjectInfo object.</li>
</ul>
<h2 class="h-breaking-changes-to-viewstate">Breaking changes to <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/views/viewstate'>ViewState</a><a id="breaking-changes-to-viewstate" class="heading-anchor" href="#breaking-changes-to-viewstate"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>To reduce errors in synchronizing a <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/views/viewport'>Viewport</a>&apos;s state with that of the ViewState it controls, several mutator methods were removed from <code>ViewState</code> and transferred to <code>Viewport</code>. These include:</p>
<ul>
<li>The setter for the <code>viewFlags</code> property.</li>
<li>The <code>overrideSubCategory</code>, <code>dropSubCategoryOverride</code>, getSubCategoryOverride<code>, and</code>getSubCategoryAppearance` functions.</li>
<li>The <code>changeCategoryDisplay</code> function.</li>
</ul>
<p>To adjust your code for these changes, change the call site to invoke the <code>Viewport</code> functions/properties instead of those formerly defined on the <code>ViewState</code>.</p>
<p>Additionally, the <code>areFeatureOverridesDirty</code> property and <code>setFeatureOverridesDirty</code> function were removed from <code>ViewState</code>. The <code>Viewport</code> now keeps track of discrete changes to its state which require feature symbology overrides to be regenerated. This also allows it to expose a variety of more granular events like <code>onViewedCategoriesChanged</code> and <code>onDisplayStyleChanged</code>. These are far more efficient than listening for <code>onViewChanged</code>, which is dispatched immediately upon each change, sometimes multiple times per frame. The new events are dispatched once per frame during which the state they monitor changed.</p>
<p>To adjust your code for these changes:</p>
<ul>
<li>If you were previously using <code>setFeatureOverridesDirty</code> to notify the <code>Viewport</code> that it must refresh its feature symbology overrides, you should no longer need to do so when modifying the display style, displayed categories etc, provided the <code>Viewport</code> APIs are used. The <code>Viewport</code> APIs automatically record the state changes and internally mark the overrides as &apos;dirty&apos; if necessary.</li>
<li>If you were using <code>setFeatureOverridesDirty</code> to notify the <code>Viewport</code> that a <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/views/featureoverrideprovider'>FeatureOverrideProvider</a> you registered with the <code>Viewport</code> had changed internally and therefore the overrides should be recalculated, use <a href='http://builds.bentley.com/prgbuilds/azurebuilds/imodeljsdocs/builds/4338/docs_output/./reference/imodeljs-frontend/views/viewport/#setfeatureoverrideproviderchanged'>Viewport.setFeatureOverrideProviderChanged</a> instead.</li>
</ul>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>08 January, 2020</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#changes-to-imodelappstartup">Changes to IModelApp.startup</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#changes-to-methods-of-entitystate">Changes to methods of EntityState</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#deprecation-of-standalone-imodels">Deprecation of standalone iModels</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#node-10153">Node 10.15.3</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#starting-up-of-backends">Starting up of backends</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#electron-4100">Electron 4.10.0</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#changes-to-authorization-of-frontend-applications">Changes to authorization of frontend applications</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#breaking-changes-to-rpc-interfaces">Breaking changes to RPC interfaces</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-enhancements-to-authorization-and-logging" class='title' href="#enhancements-to-authorization-and-logging"/>
            <b class='dropdown-menu-title menu-text'>Enhancements to authorization and logging</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-enhancements-to-authorization-and-logging" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#changes-to-authorization-for-single-page-applications">Changes to authorization for Single Page Applications</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#changes-required-for-usage-logging">Changes required for Usage Logging</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#miscellaneous-changes">Miscellaneous changes</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#breaking-changes-to-imodelservicesopenimodel">Breaking changes to ImodelServices.openIModel</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#breaking-changes-to-viewstate">Breaking changes to ViewState</a>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- TOS/Legals footer placeholder -->
      <div id="GlobalFooter"></div>

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/scripts/bundle.js"></script>
</body>

</html>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/scripts/monaco-editor/min/vs/loader.js"></script>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/builds/4338/Docs_Output/scripts/ts-playground.js"></script>
