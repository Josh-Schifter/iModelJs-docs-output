<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>CustomQueryInstanceNodes - iModel.js</title>
    <meta name="og:title" content="CustomQueryInstanceNodes - iModel.js">
    <meta name="twitter:title" content="CustomQueryInstanceNodes - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//changehistory">v1.5.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="the imodel.js library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/geometry/" class="table-of-contents-link">Geometry</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/presentation/" class="table-of-contents-link">Presentation</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/ui/" class="table-of-contents-link">UI</a></li>
    </ul>
    <hr>
    <p>&#xA0;</p>
    <h3 id="helpful links">Helpful links</h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">Glossary</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">Learning</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//learning/presentation/">presentation</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//learning/presentation/hierarchies/">hierarchies</a> > CustomQueryInstanceNodes</div>
            <div class="edit-link"><a href="https://github.com/imodeljs/imodeljs/tree/master/docs/learning/presentation/Hierarchies/CustomQueryInstanceNodes.md">Edit this page</a></div>
            <h1 id="customqueryinstancenodes">CustomQueryInstanceNodes</h1>
<p>Returns nodes for instances which are returned by an ECSQL query.</p>
<h2 class="h-attributes">Attributes<a id="attributes" class="heading-anchor" href="#attributes"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<table class="table table-responsive"><tbody><tr>
<th>Name</th>
<th>Required?</th>
<th>Type</th>
<th>Default</th>
<th>Meaning</th>
<th>Performance Notes</th>
</tr>
<tr>
<td><em>Filtering</em></td>
<td></td>
</tr>
<tr>
<td><code>queries</code></td>
<td>No</td>
<td><a href="#query-specifications"><code>QuerySpecification[]</code></a></td>
<td><code>[]</code></td>
<td>Specifications of queries used to create the content.</td>
</tr>
<tr>
<td><code>hideNodesInHierarchy</code></td>
<td>No</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>Hide nodes provided by this specification and directly show their children.</td>
<td>Expensive</td>
</tr>
<tr>
<td><code>hideIfNoChildren</code></td>
<td>No</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>Hide nodes if they don&apos;t have children.</td>
<td>Expensive</td>
</tr>
<tr>
<td><em>Ordering</em></td>
<td></td>
</tr>
<tr>
<td><code>priority</code></td>
<td>No</td>
<td><code>number</code></td>
<td><code>1000</code></td>
<td>Changes the order of specifications used to create nodes for specific branch.</td>
</tr>
<tr>
<td><code>doNotSort</code></td>
<td>No</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>Suppress default sorting of nodes returned by this specification.</td>
<td>Improves</td>
</tr>
<tr>
<td><em>Grouping</em></td>
<td></td>
</tr>
<tr>
<td><code>groupByClass</code></td>
<td>No</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Group instances by ECClass</td>
</tr>
<tr>
<td><code>groupByLabel</code></td>
<td>No</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Group instances by label</td>
<td>Expensive</td>
</tr>
<tr>
<td><em>Misc.</em></td>
<td></td>
</tr>
<tr>
<td><code>hasChildren</code></td>
<td>No</td>
<td>`&quot;Always&quot;</td>
<td>&quot;Never&quot;</td>
<td>&quot;Unknown&quot;`</td>
<td><code>&quot;Unknown&quot;</code></td>
<td>Tells the rules engine that nodes produced using this specification always or never have children.</td>
<td>Improves</td>
</tr>
<tr>
<td><code>relatedInstances</code></td>
<td>No</td>
<td><code>RelatedInstanceSpecification[]</code></td>
<td><code>[]</code></td>
<td>Specifications of <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/presentation/relatedinstancespecification'>related instances</a> that can be used in nodes&apos; creation.</td>
</tr>
<tr>
<td><code>nestedRules</code></td>
<td>No</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/presentation/hierarchies/childnoderule'><code>ChildNodeRule[]</code></a></td>
<td><code>[]</code></td>
<td>Specifications of <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/presentation/hierarchies/terminology/#nested-rules'>nested child node rules</a>.</td>
</tr>
</tbody></table><h2 class="h-query-specifications">Query Specifications<a id="query-specifications" class="heading-anchor" href="#query-specifications"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Query specifications define the actual results of the <code>CustomQueryInstanceNodes</code> specification. There are 2 types of supported query specifications: <a href="#string">string</a>
and <a href="#ecpropertyvalue">ECProperty value</a>.</p>
<p>The queries used in the specifications <strong>must</strong> return <code>ECClassId</code> and <code>ECInstanceId</code> columns, e.g.:</p>
<pre class="no-line-numbers"><code class="language-SQL">SELECT ECClassId, ECInstanceId
  FROM [bis].[Element] e
 WHERE e.ParentId = 10</code></pre>
<p><strong>Note:</strong> sorting and grouping happens after results of multiple query specifications are
aggregated.</p>
<h3 class="h-string">String<a id="string" class="heading-anchor" href="#string"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>The specification contains an ECSQL query which is used to query for instances.</p>
<h4 class="h-attributes-1">Attributes<a id="attributes-1" class="heading-anchor" href="#attributes-1"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<table class="table table-responsive"><tbody><tr>
<th>Name</th>
<th>Required?</th>
<th>Type</th>
<th>Meaning</th>
</tr>
<tr>
<td><code>class</code></td>
<td>Yes</td>
<td><code>SingleSchemaClassSpecification</code></td>
<td>Specification of ECClass whose instances the query returns.</td>
</tr>
<tr>
<td><code>query</code></td>
<td>Yes</td>
<td><code>string</code></td>
<td>Specifies the search ECSQL query.</td>
</tr>
</tbody></table><h3 class="h-ecpropertyvalue">ECPropertyValue<a id="ecpropertyvalue" class="heading-anchor" href="#ecpropertyvalue"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>The specification specifies the name of the parent node instance property whose
value is the ECSQL used to query for instances.</p>
<p><strong>Precondition:</strong> can be used only if parent node is ECInstance node.
If there is no immediate parent instance node, the rules engine walks
up the hierarchy until it finds one. If that fails, this specification
has no effect.</p>
<h4 class="h-attributes-2">Attributes<a id="attributes-2" class="heading-anchor" href="#attributes-2"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<table class="table table-responsive"><tbody><tr>
<th>Name</th>
<th>Required?</th>
<th>Type</th>
<th>Meaning</th>
</tr>
<tr>
<td><code>class</code></td>
<td>Yes</td>
<td><code>SingleSchemaClassSpecification</code></td>
<td>Specification of ECClass whose instances the query returns.</td>
</tr>
<tr>
<td><code>parentPropertyName</code></td>
<td>Yes</td>
<td><code>string</code></td>
<td>Specifies name of the parent instance property whose value contains the ECSQL query. <strong>Warning:</strong> the property whose name is specified must be of string type.</td>
</tr>
</tbody></table><h2 class="h-example">Example<a id="example" class="heading-anchor" href="#example"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<pre class="no-line-numbers"><code class="language-JSON">{
  &quot;specType&quot;: &quot;CustomQueryInstanceNodes&quot;,
  &quot;groupByClass&quot;: false,
  &quot;groupByLabel&quot;: false,
  &quot;queries&quot;: [{
    &quot;specType&quot;: &quot;String&quot;,
    &quot;class&quot;: {&quot;schemaName&quot;: &quot;BisCore&quot;, &quot;className&quot;: &quot;Element&quot;},
    &quot;query&quot;: &quot;SELECT ECClassId, ECInstanceId FROM [bis].[Element] e WHERE e.ParentId = 10&quot;
  }, {
    &quot;specType&quot;: &quot;ECPropertyValue&quot;,
    &quot;class&quot;: {&quot;schemaName&quot;: &quot;BisCore&quot;, &quot;className&quot;: &quot;GeometricElement3d&quot;},
    &quot;parentPropertyName&quot;: &quot;ChildrenQuery&quot;
  }]
}</code></pre>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>01 October, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "https://imodeljs.github.io/iModelJs-docs-output//scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#attributes">Attributes</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-query-specifications" class='title' href="#query-specifications"/>
            <b class='dropdown-menu-title menu-text'>Query Specifications</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-query-specifications" class='inner-nav'>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-string" class='title' href="#string"/>
                            <b class='dropdown-menu-title menu-text'>String</b>
                            <i class='nav-list-dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-string" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#attributes-1">Attributes</a>
                                    </li>
                            </ul>
                    </li>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-ecpropertyvalue" class='title' href="#ecpropertyvalue"/>
                            <b class='dropdown-menu-title menu-text'>ECPropertyValue</b>
                            <i class='nav-list-dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-ecpropertyvalue" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#attributes-2">Attributes</a>
                                    </li>
                            </ul>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#example">Example</a>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js"></script>
</body>

</html>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
